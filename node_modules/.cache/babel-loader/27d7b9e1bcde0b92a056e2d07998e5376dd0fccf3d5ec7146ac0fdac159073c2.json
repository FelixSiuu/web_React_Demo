{"ast":null,"code":"var _jsxFileName = \"/Users/chifaisiu/Documents/html5_css_javascript/Front-end/React/code/react_router6_reactbootstrap/src/Pages/Todo/List/List.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Modal from 'react-bootstrap/Modal';\nimport PubSub from 'pubsub-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function List() {\n  _s();\n  const [todoList, setList] = useState([{\n    id: '1',\n    title: 'todo item 1',\n    detail: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ',\n    isDone: true\n  }, {\n    id: '2',\n    title: 'todo item 2',\n    detail: 'todo item detail 2',\n    isDone: false\n  }, {\n    id: '3',\n    title: 'todo item 3',\n    detail: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',\n    isDone: false\n  }]);\n  const [show, setShow] = useState(false);\n  const [allSelect, setAllSelect] = useState(false);\n  const [pendingDelete, setDelete] = useState({\n    id: ''\n  });\n  useEffect(() => {\n    console.log('render List');\n    let dataFromHeader = function (_, data) {\n      const uuid = window.self.crypto.randomUUID();\n      setList([{\n        ...data,\n        id: uuid,\n        isDone: false\n      }, ...todoList]);\n    };\n    PubSub.subscribe('todoItem', dataFromHeader);\n    let dataFromCounter = function (_, data) {\n      setAllSelect(data);\n    };\n    PubSub.subscribe('selectAll', dataFromCounter);\n    PubSub.publish('todoList', todoList);\n  }, [todoList]);\n  useEffect(() => {\n    const newList = todoList.map(item => {\n      item['isDone'] = allSelect;\n      return item;\n    });\n    setList(newList);\n  }, [allSelect]);\n  function switchChecked(id, current) {\n    const newList = todoList.map(item => {\n      if (item.id === id) {\n        item['isDone'] = current.target.checked;\n      }\n      return item;\n    });\n    setList(newList);\n    const result = todoList.reduce((pre, cur) => {\n      return pre + (cur.isDone ? 1 : 0);\n    }, 0);\n    if (result === todoList.length) {\n      setAllSelect(true);\n    } else {\n      setAllSelect(false);\n    }\n  }\n  function handleClose(isDelete) {\n    setShow(false);\n    if (isDelete) {\n      const newList = todoList.filter(item => {\n        return item.id !== pendingDelete.id;\n      });\n      setList(newList);\n    }\n  }\n  function deleteTodo(id) {\n    setShow(true);\n    setDelete({\n      ...pendingDelete,\n      id: id\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [todoList.map((item, _) => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        className: \"mb-1\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          as: \"h6\",\n          children: [\"status:\", ' ', item.isDone ? 'Completed' : 'Outstanding', /*#__PURE__*/_jsxDEV(Form.Check, {\n            className: \"d-inline mt-1 float-end\",\n            \"aria-label\": item.title,\n            checked: item.isDone,\n            onChange: current => switchChecked(item.id, current)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: item.detail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: id => deleteTodo(item.id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this);\n    }), show ? /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: () => {\n        handleClose(false);\n      },\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Please Note\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Are you sure to delete this item ?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => {\n            handleClose(false);\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => {\n            handleClose(true);\n          },\n          children: \"Yes, please delete !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }, this) : null]\n  }, void 0, true);\n}\n_s(List, \"9UYXN+J3MsDIc8MSgD7m+6SNVuQ=\");\n_c = List;\nvar _c;\n$RefreshReg$(_c, \"List\");","map":{"version":3,"names":["React","useState","useEffect","Form","Button","Card","Modal","PubSub","jsxDEV","_jsxDEV","Fragment","_Fragment","List","_s","todoList","setList","id","title","detail","isDone","show","setShow","allSelect","setAllSelect","pendingDelete","setDelete","console","log","dataFromHeader","_","data","uuid","window","self","crypto","randomUUID","subscribe","dataFromCounter","publish","newList","map","item","switchChecked","current","target","checked","result","reduce","pre","cur","length","handleClose","isDelete","filter","deleteTodo","children","className","Header","as","Check","onChange","fileName","_jsxFileName","lineNumber","columnNumber","Body","Title","Text","variant","onClick","onHide","closeButton","Footer","_c","$RefreshReg$"],"sources":["/Users/chifaisiu/Documents/html5_css_javascript/Front-end/React/code/react_router6_reactbootstrap/src/Pages/Todo/List/List.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Modal from 'react-bootstrap/Modal';\nimport PubSub from 'pubsub-js'\n\nexport default function List() {\n\n  const [todoList, setList] = useState([\n    {id: '1', title: 'todo item 1', detail: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ', isDone: true},\n    {id: '2', title: 'todo item 2', detail: 'todo item detail 2', isDone: false},\n    {id: '3', title: 'todo item 3', detail: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.', isDone: false},\n  ])\n  const [show, setShow] = useState(false);\n  const [allSelect, setAllSelect] = useState(false);\n  const [pendingDelete, setDelete] = useState(\n    {id: ''}\n  );\n\n  useEffect(() => {\n    console.log('render List');\n\n    let dataFromHeader = function (_, data) {\n      const uuid = window.self.crypto.randomUUID()\n      setList([{...data, id: uuid, isDone: false}, ...todoList])\n    }\n    PubSub.subscribe('todoItem', dataFromHeader);\n  \n    let dataFromCounter = function (_, data) {\n      setAllSelect(data)\n    };\n    PubSub.subscribe('selectAll', dataFromCounter);  \n    \n    PubSub.publish('todoList', todoList);\n    \n  }, [todoList])\n\n  useEffect(() => {\n    const newList = todoList.map(item => {\n      item['isDone'] = allSelect\n      return item\n    })\n    setList(newList);\n  }, [allSelect])\n\n  function switchChecked(id, current){\n    const newList = todoList.map(item => {\n      if(item.id === id){\n       item['isDone'] = current.target.checked\n      }\n      return item\n    })\n    setList(newList);\n    const result = todoList.reduce((pre, cur) => {\n      return pre + (cur.isDone ? 1 : 0)\n    }, 0)\n    if(result === todoList.length){\n      setAllSelect(true)\n    }else{\n      setAllSelect(false)\n    }\n  }\n\n  function handleClose(isDelete){\n    setShow(false)\n    if(isDelete){\n      const newList = todoList.filter(item => {\n        return item.id !== pendingDelete.id\n      })\n      setList(newList);\n    }\n  }\n\n  function deleteTodo(id){\n    setShow(true)\n    setDelete({...pendingDelete, id: id})\n  }\n\n  return (\n    <>\n      {/* List */}\n      {\n        todoList.map((item, _) => {\n          return (\n            <Card key={item.id} className='mb-1'>\n              <Card.Header as=\"h6\">\n                status: \n                {' '}\n                {item.isDone? 'Completed' : 'Outstanding'}\n                <Form.Check \n                  className='d-inline mt-1 float-end'\n                  aria-label={item.title} \n                  checked={item.isDone} \n                  onChange={ current => switchChecked(item.id, current) }\n                />\n              </Card.Header>\n              <Card.Body>\n                <Card.Title>{item.title}</Card.Title>\n                <Card.Text>\n                {item.detail}\n                </Card.Text>\n                <Button variant=\"danger\" onClick={id => deleteTodo(item.id)}>Delete</Button>\n              </Card.Body>\n            </Card>\n          )\n        })\n      }\n\n      {/* Modal */}\n      {\n        show ? (\n          <Modal show={show} onHide={() => {handleClose(false)}}>\n            <Modal.Header closeButton>\n              <Modal.Title>Please Note</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>Are you sure to delete this item ?</Modal.Body>\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={() => {handleClose(false)}}>\n                Cancel\n              </Button>\n              <Button variant=\"primary\" onClick={() => {handleClose(true)}}>\n                Yes, please delete !\n              </Button>\n            </Modal.Footer>\n          </Modal>\n        )\n        : null\n      }\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}